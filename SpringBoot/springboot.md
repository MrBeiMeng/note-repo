# SpringBootğŸ†

## 1.Spring

1.å¾®æœåŠ¡ï¼Œ2å“åº”å¼ç¼–ç¨‹ï¼Œ3åˆ†å¸ƒå¼äº‘å¼€å‘ï¼Œ4webå¼€å‘ï¼Œ5serverlesså¼€å‘ï¼Œ6äº‹ä»¶é©±åŠ¨ï¼Œ7æ‰¹å¤„ç†ã€‚ã€‚ã€‚ã€‚ã€‚

### Springçš„ç”Ÿæ€

è¦†ç›–äº†ï¼š

webå¼€å‘

æ•°æ®è®¿é—®

å®‰å…¨æ§åˆ¶

åˆ†å¸ƒå¼

æ¶ˆæ¯æœåŠ¡

ç§»åŠ¨å¼€å‘

æ‰¹å¤„ç†

### Spring5é‡å¤§å‡çº§

**å“åº”å¼ç¼–ç¨‹**
![image-20211108120848487](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108120848487.png)
## 2.SpringBoot

### 	2.1SpringBootä¼˜ç‚¹

- Create stand-alone Spring applications

- - **åˆ›å»ºç‹¬ç«‹Springåº”ç”¨**

- Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)

- - **å†…åµŒwebæœåŠ¡å™¨ï¼ˆtomcat......ï¼‰**

- Provide opinionated 'starter' dependencies to simplify your build configuration

- - **è‡ªåŠ¨starterä¾èµ–ï¼Œç®€åŒ–æ„å»ºé…ç½®(jaråŒ…ç­‰é…ç½®ç¯å¢ƒ)**

- Automatically configure Spring and 3rd party libraries whenever possible

- - **è‡ªåŠ¨é…ç½®Springä»¥åŠç¬¬ä¸‰æ–¹åŠŸèƒ½**

- Provide production-ready features such as metrics, health checks, and externalized configuration

- - **æä¾›ç”Ÿäº§çº§åˆ«çš„ç›‘æ§ã€å¥åº·æ£€æŸ¥åŠå¤–éƒ¨åŒ–é…ç½®**

- Absolutely no code generation and no requirement for XML configuration

- - **æ— ä»£ç ç”Ÿæˆã€æ— éœ€ç¼–å†™XML**
- **SpringBootæ˜¯æ•´åˆSpringæŠ€æœ¯æ ˆçš„ä¸€ç«™å¼æ¡†æ¶**

- **SpringBootæ˜¯ç®€åŒ–SpringæŠ€æœ¯æ ˆçš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶**

### 2.2ã€SpringBootç¼ºç‚¹

- äººç§°ç‰ˆæœ¬å¸ï¼Œè¿­ä»£å¿«ï¼Œéœ€è¦æ—¶åˆ»å…³æ³¨å˜åŒ–
- å°è£…å¤ªæ·±ï¼Œå†…éƒ¨åŸç†å¤æ‚ï¼Œä¸å®¹æ˜“ç²¾é€š

### å®˜æ–¹æ–‡æ¡£
![image-20211108133352166](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108133352166.png)
![image-20211108133404664](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108133404664.png)
![image-20211108145130516](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108145130516.png)
## SpringBoot2å…¥é—¨

### 1ã€ç³»ç»Ÿè¦æ±‚

- [Java 8](https://www.java.com/) & å…¼å®¹java14 .
- Maven 3.3+

- idea 2019.1.2

- ### 1.1ã€mavenè®¾ç½®

    - è¿›å…¥å®‰è£…mavençš„é…ç½®æ–‡ä»¶ï¼Œ->  conf  ->settings.xml

```xml
<mirrors>
      <mirror>
        <id>nexus-aliyun</id>
        <mirrorOf>central</mirrorOf>
        <name>Nexus aliyun</name>
  <url>http://maven.aliyun.com/nexus/content/groups/public</url>
      </mirror>
  </mirrors>

  <profiles>
         <profile>
              <id>jdk-1.8</id>
              <activation>
                <activeByDefault>true</activeByDefault>
                <jdk>1.8</jdk>
              </activation>
              <properties>
 <maven.compiler.source>1.8</maven.compiler.source>             		       		<maven.compiler.target>1.8</maven.compiler.target>    <maven.compiler.compilerVersion>1.8</maven.compiler.compilerVersion>
              </properties>
         </profile>
  </profiles>
```

### 2.HelloWorld

#### 2.1ã€åˆ›å»ºmavenå·¥ç¨‹

#### 2.2ã€å¼•å…¥ä¾èµ–

```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.3.4.RELEASE</version>
</parent>


<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>

</dependencies>
```

#### 2.3ã€åˆ›å»ºä¸»ç¨‹åº

* ```java
   /**
   
    * ä¸»ç¨‹åºç±»
   
    * @SpringBootApplicationï¼šè¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨
      */
      @SpringBootApplication
      public class MainApplication {
   
      public static void main(String[] args) {
          SpringApplication.run(MainApplication.class,args);
      }
      }
   ```



#### 2.4ã€ç¼–å†™ä¸šåŠ¡

```java
//@ResponseBody
//@Controller

@RestController
public class HelloController {

    @RequestMapping("/hello")
    public String handle01(){
        return "Hello,Spring Boot 2";
    }
}
```

#### 2.5ã€æµ‹è¯•

ç›´æ¥è¿è¡Œmainæ–¹æ³•

#### 2.6ã€ç®€åŒ–é…ç½®

application.properties            server.port=8888

#### 2.7ã€ç®€åŒ–éƒ¨ç½²

```xml
<build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
```

æŠŠé¡¹ç›®æ‰“æˆjaråŒ…ï¼Œç›´æ¥åœ¨ç›®æ ‡æœåŠ¡å™¨æ‰§è¡Œå³å¯ã€‚

![image-20211108160858209](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108160858209.png)

![image-20211108160922023](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108160922023.png)

![image-20211108160948764](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108160948764.png)

æ³¨æ„ç‚¹ï¼š

- å–æ¶ˆæ‰cmdçš„å¿«é€Ÿç¼–è¾‘æ¨¡å¼

ï¼ˆå³é”®å±æ€§->å–æ¶ˆå¿«é€Ÿç¼–è¾‘æ¨¡å¼ï¼‰

## äº†è§£è‡ªåŠ¨é…ç½®åŸç†

#### 1ã€SpringBootç‰¹ç‚¹

#### 1.1ã€ä¾èµ–ç®¡ç†

- çˆ¶é¡¹ç›®åšä¾èµ–ç®¡ç†

```xml
ä¾èµ–ç®¡ç†    
<parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.3.4.RELEASE</version>
</parent>

ä»–çš„çˆ¶é¡¹ç›®
 <parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-dependencies</artifactId>
    <version>2.3.4.RELEASE</version>
  </parent>

å‡ ä¹å£°æ˜äº†æ‰€æœ‰å¼€å‘ä¸­å¸¸ç”¨çš„ä¾èµ–çš„ç‰ˆæœ¬å·,è‡ªåŠ¨ç‰ˆæœ¬ä»²è£æœºåˆ¶
```

- å¼€å‘å¯¼å…¥starteråœºæ™¯å¯åŠ¨å™¨

- ```xml
  1ã€è§åˆ°å¾ˆå¤š spring-boot-starter-* ï¼š *å°±æŸç§åœºæ™¯
  2ã€åªè¦å¼•å…¥starterï¼Œè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰å¸¸è§„éœ€è¦çš„ä¾èµ–æˆ‘ä»¬éƒ½è‡ªåŠ¨å¼•å…¥
  3ã€SpringBootæ‰€æœ‰æ”¯æŒçš„åœºæ™¯
  https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter
  4ã€è§åˆ°çš„  *-spring-boot-starterï¼š ç¬¬ä¸‰æ–¹ä¸ºæˆ‘ä»¬æä¾›çš„ç®€åŒ–å¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ã€‚
  5ã€æ‰€æœ‰åœºæ™¯å¯åŠ¨å™¨æœ€åº•å±‚çš„ä¾èµ–
  <dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter</artifactId>
    <version>2.3.4.RELEASE</version>
    <scope>compile</scope>
  </dependency>
  ```

  ![image-20211108163859724](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108163859724.png)

    - æ— éœ€å…³æ³¨ç‰ˆæœ¬å·ï¼Œè‡ªåŠ¨ç‰ˆæœ¬ä»²è£

1ã€å¼•å…¥ä¾èµ–é»˜è®¤éƒ½å¯ä»¥ä¸å†™ç‰ˆæœ¬

![image-20211108164353606](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108164353606.png)2ã€å¼•å…¥éç‰ˆæœ¬ä»²è£çš„jarï¼Œè¦å†™ç‰ˆæœ¬å·ã€‚

![image-20211108164404894](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108164404894.png)

- å¯ä»¥ä¿®æ”¹é»˜è®¤ç‰ˆæœ¬å·

- ```xml
  1ã€æŸ¥çœ‹spring-boot-dependenciesé‡Œé¢è§„å®šå½“å‰ä¾èµ–çš„ç‰ˆæœ¬ ç”¨çš„ keyã€‚
  2ã€åœ¨å½“å‰é¡¹ç›®é‡Œé¢é‡å†™é…ç½®
      <properties>
          <mysql.version>5.1.43</mysql.version>
      </properties>
  ```

### 1.2ã€è‡ªåŠ¨é…ç½®

- è‡ªåŠ¨é…å¥½Tomcat

- - å¼•å…¥Tomcatä¾èµ–ã€‚

- é…ç½®Tomcat

- ```xml
    <dependency>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-starter-tomcat</artifactId>
          <version>2.3.4.RELEASE</version>
          <scope>compile</scope>
        </dependency>
    ```

- è‡ªåŠ¨é…å¥½SpringMVC

- - å¼•å…¥SpringMVCå…¨å¥—ç»„ä»¶
- è‡ªåŠ¨é…å¥½SpringMVCå¸¸ç”¨ç»„ä»¶ï¼ˆåŠŸèƒ½ï¼‰

- è‡ªåŠ¨é…å¥½Webå¸¸è§åŠŸèƒ½ï¼Œå¦‚ï¼šå­—ç¬¦ç¼–ç é—®é¢˜

- - SpringBootå¸®æˆ‘ä»¬é…ç½®å¥½äº†æ‰€æœ‰webå¼€å‘çš„å¸¸è§åœºæ™¯

- é»˜è®¤çš„åŒ…ç»“æ„

- - ä¸»ç¨‹åºæ‰€åœ¨åŒ…åŠå…¶ä¸‹é¢çš„æ‰€æœ‰å­åŒ…é‡Œé¢çš„ç»„ä»¶éƒ½ä¼šè¢«é»˜è®¤æ‰«æè¿›æ¥
- æ— éœ€ä»¥å‰çš„åŒ…æ‰«æé…ç½®

- - æƒ³è¦æ”¹å˜æ‰«æè·¯å¾„ï¼Œ@SpringBootApplication(scanBasePackages=**"com.atguigu"**)

- - - æˆ–è€…@ComponentScan æŒ‡å®šæ‰«æè·¯å¾„

```java
@SpringBootApplication
ç­‰åŒäº
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan("com.atguigu.boot")
```

- å„ç§é…ç½®æ‹¥æœ‰é»˜è®¤å€¼

- - é»˜è®¤é…ç½®æœ€ç»ˆéƒ½æ˜¯æ˜ å°„åˆ°æŸä¸ªç±»ä¸Šï¼Œå¦‚ï¼šMultipartProperties
- é…ç½®æ–‡ä»¶çš„å€¼æœ€ç»ˆä¼šç»‘å®šæ¯ä¸ªç±»ä¸Šï¼Œè¿™ä¸ªç±»ä¼šåœ¨å®¹å™¨ä¸­åˆ›å»ºå¯¹è±¡

- æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹

- - éå¸¸å¤šçš„starter
- å¼•å…¥äº†å“ªäº›åœºæ™¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯

- - SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨ spring-boot-autoconfigure åŒ…é‡Œé¢

    ![image-20211108171107514](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211108171107514.png)

- - **è™½ç„¶å¼•å…¥äº†å¾ˆå¤šç±»ï¼Œä½†æ˜¯æœ‰äº›æ˜¯ä¸ç”Ÿæ•ˆçš„éœ€è¦è‡ªå·±åœ¨è¿›è¡Œå¼•å…¥æ‰¹å¤„ç†åœºæ™¯**

- ```xml
      <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-batch</artifactId>
      </dependency>
      ```
## å®¹å™¨åŠŸèƒ½

### ç»„ä»¶æ·»åŠ 

#### 1ã€@Configuration

åŸºæœ¬ä½¿ç”¨ï¼ˆå‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»==é…ç½®æ–‡ä»¶ï¼‰

é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ä¸ªæ–‡ä»¶

```java
//com.atguigu.boot.config.MyConfig$$EnhancerBySpringCGLIB$$64b915d9@3163987e
MyConfig bean = run.getBean(MyConfig.class);
System.out.println(bean);
```

**â—**Fullæ¨¡å¼ä¸Liteæ¨¡å¼

â—‹ç¤ºä¾‹

â—‹æœ€ä½³å®æˆ˜

â– é…ç½® ç±»ç»„ä»¶ä¹‹é—´æ— ä¾èµ–å…³ç³»ç”¨Liteæ¨¡å¼åŠ é€Ÿå®¹å™¨å¯åŠ¨è¿‡ç¨‹ï¼Œå‡å°‘åˆ¤æ–­ï¼ˆ**lite(proxyBeanMethods = false)æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡**ï¼‰

â– é…ç½®ç±»ç»„ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œæ–¹æ³•ä¼šè¢«è°ƒç”¨å¾—åˆ°ä¹‹å‰å•å®ä¾‹ç»„ä»¶ï¼Œç”¨Fullæ¨¡å¼ï¼ˆ**Full(proxyBeanMethods = true)å®¹å™¨ä¸­æ‰€æœ‰é…ç½®çš„ç»„ä»¶æ–¹æ³•ï¼Œå¤–éƒ¨çš„è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šåœ¨å®¹å™¨ä¸­æ‰¾ç»„ä»¶**ï¼‰

```java
//æ€»ç»“ï¼šä½¿ç”¨ä»£ç†ï¼Œå®¹å™¨å®ä¾‹å”¯ä¸€ï¼Œä¸ä½¿ç”¨ä»£ç†ï¼Œå¤šæ¬¡è°ƒç”¨å¤šä¸ªå®ä¾‹
```

#### 2ã€@Bean

```
@Bean//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idï¼Œè¿”å›å€¼ç±»å‹ä½œä¸ºç»„ä»¶ç±»å‹ï¼Œè¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹
```

![image-20211109093420161](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211109093420161.png)

```java
/**    ğŸ‘©Configurationçš„å®ä¾‹
 *1.é…ç½®ç±»é‡Œé¢ä½¿ç”¨@Beanæ ‡æ³¨åœ¨æ–¹æ³•ä¸Šç»™å®¹å™¨æ³¨å†Œç»„ä»¶ï¼Œé»˜è®¤ä¹Ÿæ˜¯å•å®ä¾‹çš„
 *2. é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ç»„ä»¶
 â—â—â—â—ğŸ“µ*3.proxyBeanMethods:ä»£ç†beançš„æ–¹æ³•
 * Full(proxyBeanMethods = true)å®¹å™¨ä¸­æ‰€æœ‰é…ç½®çš„ç»„ä»¶æ–¹æ³•ï¼Œå¤–éƒ¨çš„è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šåœ¨å®¹å™¨ä¸­æ‰¾ç»„ä»¶
 * lite(proxyBeanMethods = false)æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡
 * ç»„ä»¶ä¾èµ–
 *
 */
@Configuration(proxyBeanMethods = true)//å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»==é…ç½®æ–‡ä»¶
public class MyConfig {
    /**
     * FUllï¼šå¤–éƒ¨æ— è®ºå¯¹é…ç½®ç±»ä¸­çš„è¿™ä¸ªç»„ä»¶æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡è·å–çš„éƒ½ä¹‹å‰æ³¨å†Œå®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡
     * @return
     */

    @Bean//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idï¼Œè¿”å›å€¼ç±»å‹ä½œä¸ºç»„ä»¶ç±»å‹ï¼Œè¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹
    public User user01(){
        User zhangsan=new User("zhangsan",18);
        //userç»„ä»¶ä¾èµ–äº†Petç»„ä»¶
        zhangsan.setPet(tomcatPet());
        return zhangsan;
    }
    @Bean("tom")
    public Pet tomcatPet(){
        return new Pet("tomcat",23);
    }
}

ğŸ‘¨Configurationçš„æµ‹è¯•
    
/**ä¸»ç¨‹åºç±»
 * @SpringBootApplication:è¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨
 */
@SpringBootApplication(scanBasePackages = "com.atguigu")
public class MainApplication {
    public static void main(String[] args) {
        //è¿”å›æˆ‘ä»¬IOCå®¹å™¨
        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);
        //2æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶
        String[] names=run.getBeanDefinitionNames();
        for (String name : names) {
            System.out.println(name);
        }
        //ä»å®¹å™¨ä¸­è·å–ç»„ä»¶
        Pet tom1 = run.getBean("tom", Pet.class);
        Pet tom2 = run.getBean("tom", Pet.class);
System.out.println("ç»„ä»¶"+(tom1==tom2));//ç»„ä»¶true
        
        //com.atguigu.boot.config.MyConfig$$EnhancerBySpringCGLIB$$64b915d9@3163987e
        MyConfig bean = run.getBean(MyConfig.class);
        System.out.println(bean);
        //å¦‚æœ@Configuration(proxyBeanMethods=true)ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼ŒSpringBootæ€»ä¼šæ£€æŸ¥è¿™ä¸ªç»„ä»¶æ˜¯å¦åœ¨å®¹å™¨ä¸­
        //ä¿æŒç»„ä»¶å•å®ä¾‹
        ğŸ¦€//æ€»ç»“ï¼šä½¿ç”¨ä»£ç†ï¼Œå®¹å™¨å®ä¾‹å”¯ä¸€ï¼Œä¸ä½¿ç”¨ä»£ç†ï¼Œå¤šæ¬¡è°ƒç”¨å¤šä¸ªå®ä¾‹
        User user1 = bean.user01();
        User user2= bean.user01();
        System.out.println(user1==user2);//true

        User user01 = run.getBean("user01", User.class);
        Pet tom=run.getBean("tom",Pet.class);
        System.out.println("ç”¨æˆ·çš„å® ç‰©ï¼š"+(user01.getPet()==tom));//ç”¨æˆ·çš„å® ç‰©ï¼štrueä½†ä½¿ç”¨ä»£ç†çš„æ—¶å€™ï¼Œæ˜¯ä»å®¹å™¨ä¸­å–çš„å® ç‰©ã€‚
    }
}

```

daoè°ƒç”¨pojoï¼Œserviceè°ƒç”¨daoï¼Œcontrollerè°ƒç”¨service

#### 3ã€**@Component//ä»£è¡¨ä»–æ˜¯ä¸€ä¸ªç»„ä»¶**

**æ ‡æ³¨ä¸€ä¸ªç±»ä¸ºSpringå®¹å™¨çš„Beanï¼Œï¼ˆæŠŠæ™®é€špojoå®ä¾‹åŒ–åˆ°springå®¹å™¨ä¸­ï¼Œç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­çš„<bean id="" class=""/>ï¼‰**

#### 4ã€**@Controller æ§åˆ¶å™¨ï¼ˆæ³¨å…¥æœåŠ¡ï¼‰**

**ç”¨äºæ ‡æ³¨æ§åˆ¶å±‚ï¼Œç›¸å½“äºstrutsä¸­çš„actionå±‚**

#### 5ã€**@Service æœåŠ¡ï¼ˆæ³¨å…¥daoï¼‰**

**ç”¨äºæ ‡æ³¨æœåŠ¡å±‚ï¼Œä¸»è¦ç”¨æ¥è¿›è¡Œä¸šåŠ¡çš„é€»è¾‘å¤„ç†**

#### 6ã€**@Repositoryï¼ˆå®ç°daoè®¿é—®ï¼‰**

**ç”¨äºæ ‡æ³¨æ•°æ®è®¿é—®å±‚ï¼Œä¹Ÿå¯ä»¥è¯´ç”¨äºæ ‡æ³¨æ•°æ®è®¿é—®ç»„ä»¶ï¼Œå³DAOç»„ä»¶**

**@Compo**nentScanä¸»è¦å°±æ˜¯å®šä¹‰**æ‰«æçš„è·¯å¾„**ä»ä¸­æ‰¾å‡ºæ ‡è¯†äº†**éœ€è¦è£…é…**çš„ç±»è‡ªåŠ¨è£…é…åˆ°springçš„beanå®¹å™¨ä¸­

```java
@ComponentScan(value="com.zhang")
@Configuration
public class MainScanConfig {
}
```

#### 7ã€@**Import**

* ```java
   * 4ã€@Import({User.class, DBHelper.class})
   * ç»™å®¹å™¨ä¸­è‡ªåŠ¨åˆ›å»ºå‡ºè¿™ä¸¤ä¸ªç±»å‹çš„ç»„ä»¶ã€é»˜è®¤ç»„ä»¶çš„åå­—å°±æ˜¯å…¨ç±»å
   //  com.atguigu.boot.bean.User
    // ch.qos.logback.core.db.DBHelper@40147317
       */
   @Import({User.class, DBHelper.class})
   @Configuration(proxyBeanMethods = false) //å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶
   public class MyConfig {
   }
   ```

#### 8ã€@Conditional

**æ¡ä»¶è£…é…ï¼šæ»¡è¶³ConditionalæŒ‡å®šçš„æ¡ä»¶ï¼Œåˆ™è¿›è¡Œç»„ä»¶æ³¨å…¥**

![image-20211109103112435](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211109103112435.png)




```java
=====================æµ‹è¯•æ¡ä»¶è£…é…==========================
@Configuration(proxyBeanMethods = false) //å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶
//@ConditionalOnBean(name = "tom")
@ConditionalOnMissingBean(name = "tom")
public class MyConfig {
/**
 * Full:å¤–éƒ¨æ— è®ºå¯¹é…ç½®ç±»ä¸­çš„è¿™ä¸ªç»„ä»¶æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡è·å–çš„éƒ½æ˜¯ä¹‹å‰æ³¨å†Œå®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡
 * @return
 */

@Bean //ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ã€‚ä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idã€‚è¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ã€‚è¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹
public User user01(){
    User zhangsan = new User("zhangsan", 18);
    //userç»„ä»¶ä¾èµ–äº†Petç»„ä»¶
    zhangsan.setPet(tomcatPet());
    return zhangsan;
}

@Bean("tom22")
public Pet tomcatPet(){
    return new Pet("tomcat");
}
}

public static void main(String[] args) {
        //1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨
        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);
         //2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶
    String[] names = run.getBeanDefinitionNames();
    for (String name : names) {
        System.out.println(name);
    }

    boolean tom = run.containsBean("tom");
    System.out.println("å®¹å™¨ä¸­Tomç»„ä»¶ï¼š"+tom);
//false
    boolean user01 = run.containsBean("user01");
    System.out.println("å®¹å™¨ä¸­user01ç»„ä»¶ï¼š"+user01);
//true
    boolean tom22 = run.containsBean("tom22");
    System.out.println("å®¹å™¨ä¸­tom22ç»„ä»¶ï¼š"+tom22);
//true
    }
```

### åŸç”Ÿé…ç½®æ–‡ä»¶å¼•å…¥

#### 1ã€@ImportResource

======================beans.xml=========================

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd">

    <bean id="haha" class="com.atguigu.boot.bean.User">
        <property name="name" value="zhangsan"></property>
        <property name="age" value="18"></property>
    </bean>
    
    <bean id="hehe" class="com.atguigu.boot.bean.Pet">
        <property name="name" value="tomcat"></property>
    </bean>
</beans>
```

```java
@ImportResource("classpath:beans.xml")//å¯¼å…¥springçš„åŸç”Ÿæ–‡ä»¶
public class MyConfig {}

======================æµ‹è¯•=================
        boolean haha = run.containsBean("haha");
        boolean hehe = run.containsBean("hehe");
        System.out.println("hahaï¼š"+haha);//true
        System.out.println("heheï¼š"+hehe);//true
```

### é…ç½®ç»‘å®š

å°±æ˜¯å°†application.propertiesé‡Œé¢çš„é…ç½®è¿›è¡Œç»‘å®š

![image-20211109134308782](https://gitee.com/xie-zhiqing1/image/raw/master/typora/image-20211109134308782.png)

å°†è¿™ä¸¤ä¸ªç»‘å®šåˆ°ç±»ä¸Š

@ConfigurationProperties

ä¸¤ç§æ–¹å¼ï¼š

- **@Component + @ConfigurationProperties**

- ### @EnableConfigurationProperties + @ConfigurationProperties

```java
åªæœ‰åœ¨å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰ä¼šæ‹¥æœ‰SpringBootæä¾›çš„å¼ºå¤§åŠŸèƒ½
 */
 @Component
 @ConfigurationProperties(prefix = "mycar")
ğŸ‘©â€ğŸš€ //æœ‰è¿™ä¸¤ä¸ªå°±ç›¸å½“äºè¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§æ˜¯å’Œapplication.prpertiesè¿™ä¸ªæ ¸å¿ƒé…ç½®æ–‡ä»¶é‡Œé¢mycarè¿™ä¸ªå‰ç¼€ç»‘å®šçš„åœ¨ä¸€èµ·çš„
public class Car {
private String brand;
    private Integer price;
    
public String getBrand() {
 return brand;
}

public void setBrand(String brand) {
 this.brand = brand;
}

public Integer getPrice() {
 return price;
}

public void setPrice(Integer price) {
 this.price = price;
}

@Override
public String toString() {
    return "Car{" +
            "brand='" + brand + '\'' +
            ", price=" + price +
         '}';
          }
 }
  
@EnableConfigurationProperties(Car.class)
//1ã€å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½
//2ã€æŠŠè¿™ä¸ªCarè¿™ä¸ªç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å®¹å™¨ä¸­
public class MyConfig {
}
```


      